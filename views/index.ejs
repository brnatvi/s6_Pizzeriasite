<%- include('header'); %>
<div class="container-fluid d-flex flex-column flex-lg-row justify-content-center" id="main-container">
    <!-- Navigation Bar -->
    <div id="container-navigation-bar" class="col-3">
        <div class="nav flex-row flex-lg-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
            <a class="nav-link d-flex" id="v-pills-salades-tab" data-toggle="pill" href="#v-pills-salades" role="tab" aria-controls="v-pills-home" aria-selected="true">
                <img src="img/salades.png" height="35px" width="35px" alt="salades">
                <p class="color-text">Nos salades</p>
            </a>
            <a class="nav-link d-flex" id="v-pills-boissons-tab" data-toggle="pill" href="#v-pills-boissons" role="tab" aria-controls="v-pills-profile" aria-selected="false">
                <img src="img/boissons.png" height="35px" width="35px" alt="boissons">
                <p class="color-text">Nos boissons</p>
            </a>
            <a class="nav-link d-flex" id="v-pills-desserts-tab" data-toggle="pill" href="#v-pills-desserts" role="tab" aria-controls="v-pills-messages" aria-selected="false">
                <img src="img/desserts.png" height="35px" width="35px" alt="desserts">
                <p class="color-text">Nos desserts</p>
            </a>
            <a class="nav-link d-flex" id="v-pills-menus-tab" data-toggle="pill" href="#v-pills-menus" role="tab" aria-controls="v-pills-settings" aria-selected="false">
                <img src="img/menus.png" height="35px" width="35px" alt="menus">
                <p class="color-text">Nos menus</p>
            </a>
            <a class="nav-link d-flex active" id="v-pills-pizzas-tab" data-toggle="pill" href="#v-pills-pizzas" role="tab" aria-controls="v-pills-settings" aria-selected="false">
                <img src="img/pizzas.png" height="35px" width="35px" alt="pizzas">
                <p class="color-text">Nos pizzas</p>
            </a>
            <a class="nav-link d-flex" id="v-pills-recommandations-tab" data-toggle="pill" href="#v-pills-recommandations" role="tab" aria-controls="v-pills-settings" aria-selected="false">
                <img src="img/recommandations.png" height="35px" width="35px" alt="recommandations">
                <p class="color-text">Recommandations</p>
            </a>
        </div>
    </div>
    <!-- List Of Items -->
    <div id="container-items" class="col-6">
        <div class="tab-content" id="v-pills-tabContent">
            <div class="tab-pane fade" id="v-pills-salades" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                <h1>Nos salades</h1>
                <div class="row" id="all-salades">
                    <% if (locals.params.list!==undefined) { locals.params.list.forEach(article =>{ if(article.type_plat==="salade"){%>
                        <div class="m-auto container-item-desc" type="button" data-toggle="modal" data-target="#modal-info-item">
                            <img class="item-description" src="img/salades_pics/<%- article.link_picture %>" alt="salade">
                            <p class="name-salade"><%- article.nom %></p>
                            <p class="price-salade"><%- article.prix %> &#8364;</p>
                            <form method="post" action="more-ifo-item">
                                <input type="hidden" name="idArticle" value="<%- article.id_plat %>">
                            </form>
                        </div>
                    <% }})} %>
                </div>
            </div>
            <div class="tab-pane fade" id="v-pills-boissons" role="tabpanel" aria-labelledby="v-pills-messages-tab">
                <h1>Nos boissons</h1>
                <div class="row" id="all-boissons">
                    <% if (locals.params.list!==undefined) { locals.params.list.forEach(article =>{ if(article.type_plat==="boisson"){%>
                        <div class="m-auto container-item-desc" type="button" data-toggle="modal" data-target="#modal-info-item">
                            <img class="item-description" src="img/boissons_pics/<%- article.link_picture %>" alt="boisson">
                            <p class="name-boisson"><%- article.nom %></p>
                            <p class="price-boisson"><%- article.prix %> &#8364;</p>
                            <form method="post" action="more-ifo-item">
                                <input type="hidden" name="idArticle" value="<%- article.id_plat %>">
                            </form>
                        </div>
                    <% }})} %>
                </div>
            </div>
            <div class="tab-pane fade" id="v-pills-desserts" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                <h1>Nos desserts</h1>
                <div class="row" id="all-desserts">
                    <% if (locals.params.list!==undefined) { locals.params.list.forEach(article =>{ if(article.type_plat==="dessert"){%>
                        <div class="m-auto container-item-desc" type="button" data-toggle="modal" data-target="#modal-info-item">
                            <img class="item-description" src="img/desserts_pics/<%- article.link_picture %>" alt="dessert">
                            <p class="name-dessert"><%- article.nom %></p>
                            <p class="price-dessert"><%- article.prix %> &#8364;</p>
                            <form method="post" action="more-ifo-item">
                                <input type="hidden" name="idArticle" value="<%- article.id_plat %>">
                            </form>
                        </div>
                    <% }})} %>
                </div>
            </div>
            <div class="tab-pane fade" id="v-pills-menus" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                <h1>Nos menus</h1>
                <div class="row">
                    <!--TODO: menus-->
                </div>
            </div>
            <div class="tab-pane fade show active" id="v-pills-pizzas" role="tabpanel" aria-labelledby="v-pills-home-tab">
                <h1>Nos pizzas</h1>
                <div class="row" id="all-pizzas">
                    <% if (locals.params.list!==undefined) { locals.params.list.forEach(article =>{ if(article.type_plat==="pizza"){%>
                        <div class="m-auto container-item-desc" type="button" data-toggle="modal" data-target="#modal-info-item">
                            <img class="item-description" src="img/pizzas_pics/<%- article.link_picture%>" alt="pizza">
                            <p class="name-pizza"><%- article.nom %></p>
                            <p class="price-pizza"><%- article.prix %> &#8364;</p>
                            <form method="post" action="more-ifo-item">
                                <input type="hidden" name="idArticle" value="<%- article.id_plat %>">
                            </form>
                        </div>
                    <% }})} %>
                </div>
            </div>
            <div class="tab-pane fade" id="v-pills-recommandations" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                <h1>Recommandations</h1>
                <div class="row">
                    <!--TODO: recommandations-->
                </div>
            </div>
        </div>
    </div>
    <!-- Cart -->
    <div id="container-cart" class="col-3">
        <div class="card-cmd secondary">
            <div id="header-cart">
                <div class="info">
                    <p>Votre panier</p>
                </div>
                <div class="price">
                    <p>Total (TTC)</p>
                    <p id="total-price-cart-item"><%- (locals.params.price===undefined)?"0":locals.params.price.toFixed(2); %> &#8364;</p>
                </div>
                <button type="button" class="btn btn-primary">Valider mon panier</button>
            </div>
            <div id="header-border"></div>
            <div id="list-cart-item">
                <% if (locals.params.quantity!==undefined && locals.params.list!==undefined) { locals.params.list.forEach(article =>{ if(locals.params.quantity[article.id_plat]!==undefined){
                    console.log("locals.params.quantity[article.id_plat]");
                    console.log(locals.params.quantity[article.id_plat]);
                    console.log(article.id_plat);%>
                    <div id="<%- article.id_plat %>" class="element">
                        <p><%- article.nom %></p>
                        <p><%- article.descript %></p>
                        <div class="element-menu">
                            <div class="menu-quantity">
                                <form method="post" action="remove-cart-item">
                                    <input type="hidden" name="idArticle" value="<%- article.id_plat %>">
                                    <input type="image" class="remove-img" src="img/remove_circle_outline.svg" alt="Submit">
                                </form>
                                <p class="quantity-item"><%- (locals.params.quantity[article.id_plat+""]!==undefined)?locals.params.quantity[article.id_plat+""]:"0"; %></p>
                                <form method="post" action="add-cart-item">
                                    <input type="hidden" name="idArticle" value="<%- article.id_plat %>">
                                    <input type="image" class="add-img" src="img/add_circle_outline.svg" alt="Submit">
                                </form>
                            </div>
                            <p class="price-item"><%- article.prix %> &#8364;</p>
                        </div>
                    </div>
                <% }})} %>
            </div>
        </div>
    </div>
</div>
<!--TODO: change the location of the modal-->
<div class="modal fade" id="modal-info-item" tabindex="-1" role="dialog" aria-labelledby="modal-info-item-title" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content secondary">
            <div class="modal-header">
                <h5 class="modal-title text-center m-auto" id="modal-info-item-title">Modal title</h5>
            </div>
            <div id="modal-body-item">
            </div>
            <div class="modal-footer">
                <form class="form-add-dart-item" method="post" action="add-new-cart-item">
                    <input type="hidden" class="input-hide-add-cart" name="idArticle" value="">
                    <button type="submit" class="btn btn-primary add-cart-item">Ajouter au panier</button>
                </form>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" src="js/ajaxRequest.js"></script>
<%- include('footer'); %>